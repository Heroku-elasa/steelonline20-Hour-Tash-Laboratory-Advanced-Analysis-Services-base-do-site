import{j as e,u as k,a as Y,r as d,n as A,o as G,p as T,q as E,s as K,t as V,v as F,w as J}from"./index-BzL6lTip.js";const u=({title:n,value:s,change:l,isPositive:a,icon:i,color:r="blue"})=>{const h={blue:"bg-blue-50 text-blue-600 border-blue-200",red:"bg-red-50 text-red-600 border-red-200",green:"bg-green-50 text-green-600 border-green-200",yellow:"bg-yellow-50 text-yellow-600 border-yellow-200",purple:"bg-purple-50 text-purple-600 border-purple-200"};return e.jsxs("div",{className:"bg-white p-5 rounded-lg border border-slate-200 shadow-sm relative overflow-hidden group hover:shadow-md transition-all",children:[e.jsx("div",{className:`absolute top-0 right-0 rtl:right-auto rtl:left-0 p-3 rounded-bl-xl rtl:rounded-bl-none rtl:rounded-br-xl ${h[r]} opacity-20`,children:i}),e.jsx("p",{className:"text-sm text-slate-500 font-medium uppercase tracking-wide",children:n}),e.jsxs("div",{className:"mt-3 flex items-baseline gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-slate-900 font-mono",children:s}),l&&e.jsx("span",{className:`text-xs font-bold px-1.5 py-0.5 rounded ${a?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:l})]})]})},Z=({score:n})=>{const{t:s}=k(),l=50,a=2*Math.PI*l,i=a-n/100*a;let r="#10B981";return n<50?r="#EF4444":n<80&&(r="#F59E0B"),e.jsxs("div",{className:"relative w-32 h-32 flex items-center justify-center",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"64",cy:"64",r:l,stroke:"#E2E8F0",strokeWidth:"12",fill:"transparent"}),e.jsx("circle",{cx:"64",cy:"64",r:l,stroke:r,strokeWidth:"12",fill:"transparent",strokeDasharray:a,strokeDashoffset:i,strokeLinecap:"round",className:"transition-all duration-1000 ease-out"})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-3xl font-bold text-slate-800 font-mono",children:n}),e.jsx("span",{className:"text-[10px] text-slate-500 uppercase",children:s("dashboard.labels.score")})]})]})},ee=({alerts:n})=>{const{t:s}=k(),l={critical:"border-red-500 bg-red-50 text-red-700",warning:"border-yellow-500 bg-yellow-50 text-yellow-700",info:"border-blue-500 bg-blue-50 text-blue-700",error:"border-red-600 bg-red-100 text-red-800"};return e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto pr-2",children:n.map(a=>{const i=a.severity&&l[a.severity]?a.severity:"info";return e.jsxs("div",{className:`p-3 rounded-r-md border-l-4 rtl:border-l-0 rtl:border-r-4 rtl:rounded-r-none rtl:rounded-l-md ${l[i]} flex justify-between items-start gap-3 shadow-sm`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.severity==="critical"&&e.jsx("span",{className:"animate-pulse w-2 h-2 rounded-full bg-red-500"}),e.jsx("h4",{className:"font-bold text-sm",children:a.title})]}),e.jsx("p",{className:"text-xs opacity-80",children:a.date})]}),e.jsx("button",{className:"text-xs bg-white/50 hover:bg-white px-2 py-1 rounded transition-colors border border-transparent hover:border-slate-200",children:s("dashboard.labels.view")})]},a.id)})})},te=({cleared:n,pending:s,bounced:l})=>{const{t:a}=k(),i=n+s+l,r=[{value:n,color:"#10B981",label:a("dashboard.labels.cleared")},{value:s,color:"#F59E0B",label:a("dashboard.labels.pending")},{value:l,color:"#EF4444",label:a("dashboard.labels.bounced")}];let h=0;const o=c=>{const m=Math.cos(2*Math.PI*c),b=Math.sin(2*Math.PI*c);return[m,b]};return e.jsxs("div",{className:"flex items-center justify-center gap-6",children:[e.jsxs("div",{className:"relative w-32 h-32",children:[e.jsxs("svg",{viewBox:"-1 -1 2 2",className:"transform -rotate-90 w-full h-full",children:[r.map((c,m)=>{if(c.value===0)return null;const b=h,y=h+c.value/i;h=y;const[v,C]=o(b),[S,L]=o(y),N=c.value/i>.5?1:0,w=`M ${v} ${C} A 1 1 0 ${N} 1 ${S} ${L} L 0 0`;return e.jsx("path",{d:w,fill:c.color,stroke:"white",strokeWidth:"0.02"},m)}),e.jsx("circle",{cx:"0",cy:"0",r:"0.6",fill:"white"})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400",children:a("dashboard.labels.total")}),e.jsx("span",{className:"text-lg font-bold text-slate-800 font-mono",children:i})]})]}),e.jsx("div",{className:"space-y-2",children:r.map((c,m)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:c.color}}),e.jsx("span",{className:"font-medium text-slate-700",children:c.label}),e.jsxs("span",{className:"text-slate-500 font-mono",children:["(",c.value,")"]})]},m))})]})},se=()=>{const n=[{label:"M1",in:120,out:100},{label:"M2",in:150,out:110},{label:"M3",in:180,out:190},{label:"M4",in:200,out:140},{label:"M5",in:170,out:130},{label:"M6",in:220,out:150}],s=250;return e.jsx("div",{className:"h-48 w-full flex items-end justify-between gap-2 pt-6",children:n.map((l,a)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 h-full justify-end group",children:[e.jsxs("div",{className:"w-full flex gap-1 items-end justify-center h-full",children:[e.jsx("div",{style:{height:`${l.in/s*100}%`},className:"w-3 bg-green-500 rounded-t-sm relative group-hover:opacity-80 transition-all"}),e.jsx("div",{style:{height:`${l.out/s*100}%`},className:"w-3 bg-red-500 rounded-t-sm relative group-hover:opacity-80 transition-all"})]}),e.jsx("span",{className:"text-[10px] text-slate-400 font-mono",children:l.label})]},a))})},le=({setPage:n})=>{const{t:s,dir:l,language:a}=k(),{addToast:i}=Y(),[r,h]=d.useState("overview"),[o,c]=d.useState(null),[m,b]=d.useState([]),[y,v]=d.useState([]),[C,S]=d.useState([]),[L,N]=d.useState([]),[w,z]=d.useState([]),[I,$]=d.useState(!0),[p,j]=d.useState("checking"),[P,B]=d.useState([]),[W,R]=d.useState(!1);d.useEffect(()=>{(async()=>{$(!0);try{(await A()).success?j("connected"):(j("needs_setup"),h("system"));const[_,M,D,Q,U,X]=await Promise.all([G(),T(a),E(),K(a),V(),F().catch(()=>[])]);c(_),b(M),v(D),S(Q),N(U),z(X||[])}catch(f){console.error("Failed to fetch dashboard data",f),j("error")}finally{$(!1)}})()},[a]);const H=async()=>{if(i("Attempting to sync with database...","info"),(await A()).success){j("connected"),i("Database synced successfully.","success");const f=await E();v(f);const _=await T(a);b(_);const M=await V();N(M);const D=await F().catch(()=>[]);z(D||[])}else j("needs_setup"),i("Sync failed. Check tables in Supabase.","error")},O=async()=>{R(!0),B([]);const t=await J();B(t),R(!1)},q=[{key:"overview",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{key:"financial",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},{key:"audit",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})},{key:"customers",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})},{key:"reports",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{key:"system",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"})})}],g=t=>a==="fa"?(t/1e9).toLocaleString("fa-IR")+" میلیارد ریال":(t/1e9).toFixed(1)+"B IRR",x=t=>a==="fa"?t.toLocaleString("fa-IR"):t.toLocaleString();return e.jsxs("div",{className:"min-h-screen bg-[#f0f0f1] flex animate-fade-in",dir:l,children:[e.jsxs("aside",{className:"w-16 md:w-56 bg-[#1d2327] text-white flex flex-col flex-shrink-0 transition-all duration-300 relative z-20",children:[e.jsxs("div",{className:"h-14 flex items-center justify-center border-b border-[#3c434a] bg-[#1d2327]",children:[e.jsx("span",{className:"text-xl font-bold text-white hidden md:block",children:"Steel Online 20"}),e.jsx("span",{className:"text-xl font-bold text-white md:hidden",children:"S"})]}),e.jsx("div",{className:"border-b border-[#3c434a] mb-2",children:e.jsxs("button",{onClick:()=>n("home"),className:"w-full flex items-center px-4 py-3 text-[#f0f0f1] hover:text-[#72aee6] hover:bg-[#2c3338] transition-colors group",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`w-5 h-5 group-hover:text-[#72aee6] transition-colors ${l==="rtl"?"ml-3":"mr-3"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),e.jsx("span",{className:"hidden md:block text-sm font-medium",children:a==="fa"?"مشاهده سایت":"Visit Site"})]})}),e.jsx("nav",{className:"flex-1 py-2 space-y-0.5",children:q.map(t=>e.jsxs("button",{onClick:()=>h(t.key),className:`w-full flex items-center px-4 py-3 transition-colors relative group ${r===t.key?"bg-[#2271b1] text-white":"text-[#f0f0f1] hover:bg-[#2c3338] hover:text-[#72aee6]"}`,children:[r===t.key&&e.jsx("div",{className:`absolute top-0 bottom-0 w-1 bg-[#72aee6] md:hidden ${l==="rtl"?"right-0":"left-0"}`}),e.jsx("div",{className:`${r===t.key?"text-white":"text-[#a7aaad] group-hover:text-[#72aee6]"}`,children:t.icon}),e.jsx("span",{className:`hidden md:block text-sm font-medium ${l==="rtl"?"mr-3":"ml-3"}`,children:t.key==="system"?"System & DB":s(`dashboard.menu.${t.key}`)}),r===t.key&&e.jsx("div",{className:`hidden md:block absolute top-1/2 transform -translate-y-1/2 w-3 h-3 bg-[#f0f0f1] rotate-45 ${l==="rtl"?"left-0 -translate-x-1/2":"right-0 translate-x-1/2"}`})]},t.key))})]}),e.jsxs("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-[#f0f0f1]",children:[e.jsxs("header",{className:"bg-white shadow-sm h-14 flex items-center justify-between px-6 sticky top-0 z-10 border-b border-[#dcdcde]",children:[e.jsx("h1",{className:"text-lg font-semibold text-[#1d2327]",children:r==="system"?"System Status":s(`dashboard.menu.${r}`)}),e.jsxs("div",{className:"flex items-center gap-4",children:[p==="connected"?e.jsxs("span",{className:"text-xs font-bold text-green-600 bg-green-100 px-2 py-1 rounded-full flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-green-600 rounded-full"})," DB Connected"]}):e.jsxs("span",{className:"text-xs font-bold text-red-600 bg-red-100 px-2 py-1 rounded-full flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-red-600 rounded-full animate-pulse"})," DB Missing"]}),e.jsx("span",{className:"text-xs text-slate-500 font-mono",children:"v2.4.0"})]})]}),e.jsx("div",{className:"p-6",children:I?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-corp-blue rounded-full animate-spin"})}):e.jsxs(e.Fragment,{children:[r==="overview"&&o&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(u,{title:s("dashboard.stats.totalChecks"),value:g(o.totalChecksAmount),change:`${x(o.totalChecksCount)} ${s("dashboard.labels.checks")}`,color:"blue",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx(u,{title:s("dashboard.stats.dueThisWeek"),value:g(o.checksDueThisWeekAmount),change:`${x(o.checksDueThisWeekCount)} ${s("dashboard.labels.urgent")}`,color:"yellow",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx(u,{title:s("dashboard.stats.cashBalance"),value:g(o.cashBalance),change:`4 ${s("dashboard.labels.accounts")}`,color:"green",isPositive:!0,icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx(u,{title:s("dashboard.stats.controlScore"),value:`${x(o.internalControlScore)}/100`,change:s("dashboard.labels.good"),color:"purple",isPositive:!0,icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg border border-slate-200 shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:s("dashboard.charts.cashFlow")}),e.jsx(se,{})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),s("dashboard.audit.urgentAlerts")]}),e.jsx(ee,{alerts:m})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-6",children:[e.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:s("dashboard.charts.checkStatus")}),e.jsx(te,{cleared:o.totalChecksCount-o.checksDueThisWeekCount-2,pending:o.checksDueThisWeekCount,bounced:2})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800 mb-2",children:s("dashboard.charts.internalControl")}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:s("dashboard.labels.basedOn")}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between w-48",children:[e.jsxs("span",{className:"text-slate-500",children:[s("dashboard.labels.risk"),":"]})," ",e.jsx("span",{className:"text-green-600 font-bold",children:s("dashboard.labels.good")})]}),e.jsxs("div",{className:"flex justify-between w-48",children:[e.jsxs("span",{className:"text-slate-500",children:[s("dashboard.labels.monitoring"),":"]})," ",e.jsx("span",{className:"text-yellow-600 font-bold",children:s("dashboard.labels.adequate")})]}),e.jsxs("div",{className:"flex justify-between w-48",children:[e.jsxs("span",{className:"text-slate-500",children:[s("dashboard.labels.activities"),":"]})," ",e.jsx("span",{className:"text-green-600 font-bold",children:s("dashboard.labels.strong")})]})]})]}),e.jsx(Z,{score:o.internalControlScore})]})]})]}),r==="financial"&&e.jsx("div",{className:"space-y-6 animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:s("dashboard.financial.title")}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded text-sm font-bold hover:bg-blue-700",children:s("dashboard.financial.registerBtn")})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 uppercase font-bold text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:s("dashboard.tables.headers.checkNumber")}),e.jsx("th",{className:"px-4 py-3",children:s("dashboard.tables.headers.dueDate")}),e.jsx("th",{className:"px-4 py-3",children:s("dashboard.tables.headers.amount")}),e.jsx("th",{className:"px-4 py-3",children:s("dashboard.tables.headers.drawer")}),e.jsx("th",{className:"px-4 py-3",children:s("dashboard.tables.headers.bank")}),e.jsx("th",{className:"px-4 py-3 text-right rtl:text-left",children:s("dashboard.tables.headers.status")})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:y.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"px-4 py-3 font-mono",children:t.number}),e.jsx("td",{className:"px-4 py-3",children:t.dueDate}),e.jsx("td",{className:"px-4 py-3 font-bold",children:x(t.amount)}),e.jsx("td",{className:"px-4 py-3",children:t.drawer}),e.jsx("td",{className:"px-4 py-3",children:t.bank}),e.jsx("td",{className:"px-4 py-3 text-right rtl:text-left",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${t.status==="cleared"?"bg-green-100 text-green-700":t.status==="bounced"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:t.status==="cleared"?s("dashboard.labels.cleared"):t.status==="bounced"?s("dashboard.labels.bounced"):s("dashboard.labels.pending")})})]},t.id))})]})})]})}),r==="audit"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(u,{title:s("dashboard.stats.documentsReviewed"),value:x(1402),icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx(u,{title:s("dashboard.stats.discrepancies"),value:x(12),color:"red",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx(u,{title:s("dashboard.stats.fraudCases"),value:x(3),color:"red",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[e.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),s("dashboard.audit.auditLogs")]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 uppercase font-bold text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:s("dashboard.tables.headers.document")}),e.jsx("th",{className:"px-4 py-3",children:s("dashboard.tables.headers.type")}),e.jsx("th",{className:"px-4 py-3",children:s("dashboard.tables.headers.date")}),e.jsx("th",{className:"px-4 py-3",children:s("dashboard.tables.headers.aiRisk")}),e.jsx("th",{className:"px-4 py-3 text-right rtl:text-left",children:s("dashboard.tables.headers.status")})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:C.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("p",{className:"font-bold text-slate-800",children:t.title}),e.jsx("p",{className:"text-xs text-slate-500",children:t.id})]}),e.jsx("td",{className:"px-4 py-3",children:t.type}),e.jsx("td",{className:"px-4 py-3",children:t.date}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2 max-w-[100px]",children:e.jsx("div",{className:`h-2 rounded-full ${t.riskScore>70?"bg-red-500":t.riskScore>40?"bg-yellow-500":"bg-green-500"}`,style:{width:`${t.riskScore}%`}})}),e.jsxs("span",{className:"text-xs mt-1 block",children:[x(t.riskScore),"/100"]})]}),e.jsx("td",{className:"px-4 py-3 text-right rtl:text-left",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${t.status==="approved"?"bg-green-100 text-green-700":t.status==="rejected"?"bg-red-100 text-red-700":t.status==="flagged"?"bg-purple-100 text-purple-700":"bg-yellow-100 text-yellow-700"}`,children:t.status})})]},t.id))})]})})]})]}),r==="customers"&&e.jsx("div",{className:"space-y-6 animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-6",children:s("dashboard.customers.title")}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 uppercase font-bold text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:s("dashboard.tables.headers.customer")}),e.jsx("th",{className:"px-4 py-3",children:s("dashboard.tables.headers.type")}),e.jsx("th",{className:"px-4 py-3",children:s("dashboard.tables.headers.creditLimit")}),e.jsx("th",{className:"px-4 py-3",children:s("dashboard.tables.headers.used")}),e.jsx("th",{className:"px-4 py-3",children:s("dashboard.labels.score")}),e.jsx("th",{className:"px-4 py-3 text-right rtl:text-left",children:s("dashboard.tables.headers.risk")})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:L.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"px-4 py-3 font-bold text-slate-800",children:t.name}),e.jsx("td",{className:"px-4 py-3 capitalize",children:t.type}),e.jsx("td",{className:"px-4 py-3 font-mono",children:g(t.creditLimit)}),e.jsx("td",{className:"px-4 py-3 font-mono",children:g(t.usedCredit)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:x(t.creditScore)}),e.jsx("div",{className:"flex-1 bg-slate-200 h-1.5 rounded-full w-16",children:e.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full",style:{width:`${t.creditScore/10}%`}})})]})}),e.jsx("td",{className:"px-4 py-3 text-right rtl:text-left",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${t.riskLevel==="low"?"bg-green-100 text-green-700":t.riskLevel==="high"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:t.riskLevel})})]},t.id))})]})})]})}),r==="reports"&&e.jsx("div",{className:"space-y-6 animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-6",children:"SEO & Performance Reports"}),e.jsx("div",{className:"overflow-x-auto",children:w.length>0?e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 uppercase font-bold text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"ID"}),e.jsx("th",{className:"px-4 py-3",children:"URL"}),e.jsx("th",{className:"px-4 py-3",children:"Score"}),e.jsx("th",{className:"px-4 py-3",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-right rtl:text-left",children:"Metrics"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:w.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsxs("td",{className:"px-4 py-3 text-slate-500",children:["#",t.id]}),e.jsx("td",{className:"px-4 py-3 text-blue-600 font-medium truncate max-w-xs",children:t.url}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${t.score>=90?"bg-green-100 text-green-800":t.score>=70?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:t.score})}),e.jsx("td",{className:"px-4 py-3 text-slate-600",children:new Date(t.created_at).toLocaleString()}),e.jsx("td",{className:"px-4 py-3 text-right rtl:text-left text-xs text-slate-500",children:t.metrics?Object.keys(t.metrics).length+" Metrics":"N/A"})]},t.id))})]}):e.jsx("div",{className:"text-center py-12 text-slate-500",children:"No reports found. Use the SEO Checker tool to generate one."})})]})}),r==="system"&&e.jsxs("div",{className:"space-y-6 animate-fade-in bg-white p-6 rounded-lg border border-slate-200",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Database Connection & Setup"}),e.jsxs("div",{className:`p-4 rounded-md border ${p==="connected"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`w-3 h-3 rounded-full ${p==="connected"?"bg-green-600":"bg-red-600"}`}),e.jsx("h3",{className:"font-bold",children:p==="connected"?"Connected to Supabase":"Connection/Schema Issue"})]}),e.jsx("p",{className:"text-sm",children:p==="connected"?"The application is successfully connected to your database.":"Could not find the required tables. Please copy the SQL below and run it in your Supabase SQL Editor."})]}),e.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-200 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-slate-700 text-sm",children:"Connection Diagnostics"}),e.jsx("button",{onClick:O,disabled:W,className:"px-3 py-1.5 bg-slate-800 text-white text-xs font-bold rounded hover:bg-slate-700 transition-colors disabled:opacity-50",children:W?"Running...":"Run Diagnostics"})]}),e.jsx("div",{className:"p-4 bg-slate-900 min-h-[120px] max-h-60 overflow-y-auto font-mono text-xs",children:P.length===0?e.jsx("span",{className:"text-slate-500",children:"Ready to run diagnostics. Click the button above."}):e.jsx("ul",{className:"space-y-1",children:P.map((t,f)=>e.jsxs("li",{className:"flex gap-2",children:[e.jsxs("span",{className:"text-slate-500",children:["[",t.step,"]"]}),e.jsx("span",{className:t.status==="success"?"text-green-400":t.status==="error"?"text-red-400":"text-blue-300",children:t.message})]},f))})})]}),p!=="connected"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700",children:"Required Schema (Copy & Paste):"}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`-- SEO Reports Table
create table if not exists seo_reports (
  id bigint generated by default as identity primary key,
  url text,
  score numeric,
  metrics jsonb,
  recommendations jsonb,
  created_at timestamp with time zone default timezone('utc'::text, now())
);
alter table seo_reports enable row level security;
create policy "Public insert seo" on seo_reports for insert with check (true);
create policy "Public select seo" on seo_reports for select using (true);

-- Financial Checks Table
create table if not exists financial_checks (
  id bigint generated by default as identity primary key,
  number text,
  amount numeric,
  due_date text,
  status text,
  drawer text,
  bank text,
  created_at timestamp with time zone default timezone('utc'::text, now())
);
alter table financial_checks enable row level security;
create policy "Public insert checks" on financial_checks for insert with check (true);
create policy "Public select checks" on financial_checks for select using (true);

-- Audit Alerts Table
create table if not exists audit_alerts (
  id bigint generated by default as identity primary key,
  title text,
  type text,
  severity text,
  date text,
  is_read boolean,
  created_at timestamp with time zone default timezone('utc'::text, now())
);
alter table audit_alerts enable row level security;
create policy "Public insert alerts" on audit_alerts for insert with check (true);
create policy "Public select alerts" on audit_alerts for select using (true);

-- Customer Credits Table
create table if not exists customer_credits (
  id bigint generated by default as identity primary key,
  name text,
  type text,
  credit_score numeric,
  credit_limit numeric,
  used_credit numeric,
  risk_level text,
  created_at timestamp with time zone default timezone('utc'::text, now())
);
alter table customer_credits enable row level security;
create policy "Public insert credits" on customer_credits for insert with check (true);
create policy "Public select credits" on customer_credits for select using (true);`),i("SQL Copied!","success")},className:"text-xs text-blue-600 hover:underline",children:"Copy to Clipboard"})]}),e.jsx("div",{className:"bg-slate-900 text-slate-300 p-4 rounded-md text-xs font-mono overflow-x-auto max-h-96",children:e.jsx("pre",{children:`-- SEO Reports Table
create table if not exists seo_reports (
  id bigint generated by default as identity primary key,
  url text,
  score numeric,
  metrics jsonb,
  recommendations jsonb,
  created_at timestamp with time zone default timezone('utc'::text, now())
);
alter table seo_reports enable row level security;
create policy "Public insert seo" on seo_reports for insert with check (true);
create policy "Public select seo" on seo_reports for select using (true);

-- Financial Checks Table
create table if not exists financial_checks (
  id bigint generated by default as identity primary key,
  number text,
  amount numeric,
  due_date text,
  status text,
  drawer text,
  bank text,
  created_at timestamp with time zone default timezone('utc'::text, now())
);
alter table financial_checks enable row level security;
create policy "Public insert checks" on financial_checks for insert with check (true);
create policy "Public select checks" on financial_checks for select using (true);

-- Audit Alerts Table
create table if not exists audit_alerts (
  id bigint generated by default as identity primary key,
  title text,
  type text,
  severity text,
  date text,
  is_read boolean,
  created_at timestamp with time zone default timezone('utc'::text, now())
);
alter table audit_alerts enable row level security;
create policy "Public insert alerts" on audit_alerts for insert with check (true);
create policy "Public select alerts" on audit_alerts for select using (true);

-- Customer Credits Table
create table if not exists customer_credits (
  id bigint generated by default as identity primary key,
  name text,
  type text,
  credit_score numeric,
  credit_limit numeric,
  used_credit numeric,
  risk_level text,
  created_at timestamp with time zone default timezone('utc'::text, now())
);
alter table customer_credits enable row level security;
create policy "Public insert credits" on customer_credits for insert with check (true);
create policy "Public select credits" on customer_credits for select using (true);`})}),e.jsx("p",{className:"text-sm text-slate-600",children:"After running the SQL in Supabase, click Sync below."})]}),e.jsx("div",{className:"pt-4 border-t border-slate-200",children:e.jsx("button",{onClick:H,className:"px-6 py-2 bg-blue-600 text-white rounded font-bold hover:bg-blue-700 transition-colors",children:"Check Connection & Sync Mock Data"})})]})]})})]})]})};export{le as default};
