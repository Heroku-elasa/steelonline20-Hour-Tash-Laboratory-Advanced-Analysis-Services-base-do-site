import{u as C,r as n,j as e,m as L}from"./index-BzL6lTip.js";const R=({chatHistory:a,isStreaming:l,onSendMessage:h,setPage:f})=>{const{t:o,dir:d}=C(),[i,p]=n.useState(""),m=n.useRef(null),c=n.useRef(null),g=n.useRef(null);n.useEffect(()=>{var s;(s=m.current)==null||s.scrollIntoView({behavior:"smooth"})},[a,l]),n.useEffect(()=>{c.current&&(c.current.style.height="auto",c.current.style.height=`${c.current.scrollHeight}px`)},[i]);const j=s=>{const t=s.target.closest("a");if(t&&t.hasAttribute("href")){const r=t.getAttribute("href");if(r&&r.startsWith("page:")){s.preventDefault();const x=r.substring(5);f(x)}}},b=s=>{s.preventDefault(),i.trim()&&!l&&(h(i),p(""))},v=(s,u)=>{const t=s.role==="user",r=u===a.length-1,x=l&&r&&s.role==="model"&&s.parts[0].text==="",k=L.parse(s.parts[0].text,{breaks:!0}),N=t?d==="rtl"?"justify-start":"justify-end":d==="rtl"?"justify-end":"justify-start",y=t?`bg-corp-blue-dark text-white ${d==="rtl"?"rounded-bl-lg":"rounded-br-lg"}`:`bg-slate-200 text-slate-800 ${d==="rtl"?"rounded-br-lg":"rounded-bl-lg"}`;return e.jsxs("div",{className:`flex items-end gap-3 ${N}`,children:[!t&&e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-corp-blue text-white rounded-full flex items-center justify-center border-2 border-corp-blue-dark",children:e.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 2L6 5.464V12v6.536L12 22l6-3.464V12V5.464L12 2z"}),e.jsx("path",{d:"M6 12h12"})]})}),e.jsxs("div",{className:`max-w-xl p-4 rounded-2xl shadow-md ${y}`,children:[x?e.jsxs("div",{className:"flex items-center space-x-1 p-2",children:[e.jsx("span",{className:"w-2 h-2 bg-corp-blue-dark rounded-full animate-pulse",style:{animationDelay:"0s"}}),e.jsx("span",{className:"w-2 h-2 bg-corp-blue-dark rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),e.jsx("span",{className:"w-2 h-2 bg-corp-blue-dark rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]}):e.jsx("div",{className:`prose prose-sm max-w-none prose-p:my-2 first:prose-p:mt-0 last:prose-p:mb-0 ${d==="rtl"?"text-right":"text-left"}`,dangerouslySetInnerHTML:{__html:k}}),l&&r&&!t&&s.parts[0].text!==""&&e.jsx("span",{className:"inline-block w-2 h-4 bg-slate-700 ml-1 animate-pulse"})]})]},u)},w=!l&&a.length>0&&a[a.length-1].role==="model";return e.jsx("section",{id:"ai-chat",className:"py-16 sm:py-24 animate-fade-in bg-slate-100",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-3xl",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold text-slate-900 tracking-tight",children:o("aiChat.title")}),e.jsx("p",{className:"mt-4 text-lg text-slate-600",children:o("aiChat.subtitle")})]}),e.jsxs("div",{className:"mt-12 bg-white rounded-lg shadow-2xl border border-slate-200 flex flex-col h-[70vh] max-h-[700px]",children:[e.jsxs("div",{className:"flex-1 p-6 space-y-6 overflow-y-auto",ref:g,onClick:j,children:[a.map(v),e.jsx("div",{ref:m})]}),w&&e.jsx("div",{className:"px-6 pb-2 pt-2 border-t border-slate-200",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:o("aiChat.suggestions").map((s,u)=>e.jsx("button",{onClick:()=>h(s),className:"px-3 py-1.5 bg-slate-200 text-slate-700 text-xs font-medium rounded-full hover:bg-slate-300 hover:text-slate-900 transition-colors",children:s},u))})}),e.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50 rounded-b-lg",children:e.jsxs("form",{onSubmit:b,className:"flex items-start gap-3",children:[e.jsx("textarea",{ref:c,value:i,onChange:s=>p(s.target.value),onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),b(s))},placeholder:o("aiChat.placeholder"),className:"flex-grow bg-slate-100 border-slate-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-corp-blue-dark text-slate-800 resize-none max-h-32",rows:1,disabled:l,"aria-label":o("aiChat.placeholder")}),e.jsx("button",{type:"submit",disabled:l||!i.trim(),className:"p-3 bg-corp-blue-dark text-white rounded-full hover:bg-corp-blue-dark/90 transition-colors disabled:bg-slate-400 disabled:cursor-not-allowed flex-shrink-0","aria-label":"Send message",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})})]})})]})]})})};export{R as default};
